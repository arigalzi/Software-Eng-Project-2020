


<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html id="htmlId">
<head>
  <title>Coverage Report :: GUI</title>
  <style type="text/css">
    @import "../../.css/coverage.css";
  </style>
</head>

<body>
<div class="header"></div>

<div class="content">
<div class="breadCrumbs">
    [ <a href="../../index.html">all classes</a> ]
    [ <a href="../index.html">it.polimi.ingsw.PSP47.View.GUI</a> ]
</div>

<h1>Coverage Summary for Class: GUI (it.polimi.ingsw.PSP47.View.GUI)</h1>

<table class="coverageStats">

<tr>
  <th class="name">Class</th>
<th class="coverageStat 
">
  Method, %
</th>
<th class="coverageStat 
">
  Line, %
</th>
</tr>
<tr>
  <td class="name">GUI</td>
<td class="coverageStat">
  <span class="percent">
    0%
  </span>
  <span class="absValue">
    (0/ 39)
  </span>
</td>
<td class="coverageStat">
  <span class="percent">
    0%
  </span>
  <span class="absValue">
    (0/ 156)
  </span>
</td>
</tr>
  <tr>
    <td class="name">GUI$1</td>
<td class="coverageStat">
  <span class="percent">
    0%
  </span>
  <span class="absValue">
    (0/ 2)
  </span>
</td>
<td class="coverageStat">
  <span class="percent">
    0%
  </span>
  <span class="absValue">
    (0/ 4)
  </span>
</td>
  </tr>
<tr>
  <td class="name"><strong>total</strong></td>
<td class="coverageStat">
  <span class="percent">
    0%
  </span>
  <span class="absValue">
    (0/ 41)
  </span>
</td>
<td class="coverageStat">
  <span class="percent">
    0%
  </span>
  <span class="absValue">
    (0/ 160)
  </span>
</td>
</tr>
</table>

<br/>
<br/>


<div class="sourceCode"><i>1</i>&nbsp;package it.polimi.ingsw.PSP47.View.GUI;
<i>2</i>&nbsp;
<i>3</i>&nbsp;import it.polimi.ingsw.PSP47.Enumerations.CurrentMoment;
<i>4</i>&nbsp;import it.polimi.ingsw.PSP47.Enumerations.GodName;
<i>5</i>&nbsp;import it.polimi.ingsw.PSP47.Model.Slot;
<i>6</i>&nbsp;import it.polimi.ingsw.PSP47.Network.Client.NetworkHandler;
<i>7</i>&nbsp;import it.polimi.ingsw.PSP47.View.GameView;
<i>8</i>&nbsp;import it.polimi.ingsw.PSP47.View.View;
<i>9</i>&nbsp;import javafx.application.Application;
<i>10</i>&nbsp;import javafx.application.Platform;
<i>11</i>&nbsp;import javafx.event.EventHandler;
<i>12</i>&nbsp;import javafx.fxml.FXMLLoader;
<i>13</i>&nbsp;import javafx.scene.Parent;
<i>14</i>&nbsp;import javafx.scene.Scene;
<i>15</i>&nbsp;import javafx.scene.control.Alert;
<i>16</i>&nbsp;import javafx.scene.control.ButtonType;
<i>17</i>&nbsp;import javafx.scene.image.Image;
<i>18</i>&nbsp;import javafx.scene.image.ImageView;
<i>19</i>&nbsp;import javafx.scene.layout.AnchorPane;
<i>20</i>&nbsp;import javafx.scene.text.Text;
<i>21</i>&nbsp;import javafx.stage.Modality;
<i>22</i>&nbsp;import javafx.stage.Screen;
<i>23</i>&nbsp;import javafx.stage.Stage;
<i>24</i>&nbsp;import javafx.stage.WindowEvent;
<i>25</i>&nbsp;
<i>26</i>&nbsp;import java.io.IOException;
<i>27</i>&nbsp;import java.util.ArrayList;
<i>28</i>&nbsp;import java.util.Optional;
<i>29</i>&nbsp;
<i>30</i>&nbsp;/**
<i>31</i>&nbsp; * This class is used to change what the user will see and updates the current scene
<i>32</i>&nbsp; * It is only used for the graphic part, which means display and change of scene layout
<i>33</i>&nbsp; */
<b class="nc"><i>34</i>&nbsp;public class GUI extends Application implements View {</b>
<i>35</i>&nbsp;
<i>36</i>&nbsp;    private NetworkHandler networkHandler;
<i>37</i>&nbsp;    private GameView gameView;
<i>38</i>&nbsp;
<i>39</i>&nbsp;    private Stage primaryStage;
<i>40</i>&nbsp;    private Scene scene;
<i>41</i>&nbsp;    private Parent root;
<i>42</i>&nbsp;
<i>43</i>&nbsp;    private DuringGameController duringGameController;
<i>44</i>&nbsp;
<i>45</i>&nbsp;    public void setNetworkHandler(NetworkHandler networkHandler) {
<b class="nc"><i>46</i>&nbsp;        this.networkHandler = networkHandler;</b>
<i>47</i>&nbsp;    }
<i>48</i>&nbsp;
<i>49</i>&nbsp;    @Override
<i>50</i>&nbsp;    public GameView getGameView() {
<b class="nc"><i>51</i>&nbsp;        return gameView;</b>
<i>52</i>&nbsp;    }
<i>53</i>&nbsp;
<i>54</i>&nbsp;    /**
<i>55</i>&nbsp;     * This method makes the GUI starts running.
<i>56</i>&nbsp;     * It load the first scene and creates the gameView.
<i>57</i>&nbsp;     * @param primaryStage the Stage that will be used during the game.
<i>58</i>&nbsp;     * @throws Exception if there are some I/O troubles.
<i>59</i>&nbsp;     */
<i>60</i>&nbsp;    @Override
<i>61</i>&nbsp;    public void start(Stage primaryStage) throws Exception {
<b class="nc"><i>62</i>&nbsp;        gameView = new GameView();</b>
<b class="nc"><i>63</i>&nbsp;        this.primaryStage = primaryStage;</b>
<b class="nc"><i>64</i>&nbsp;        FXMLLoader fxmlLoader = new FXMLLoader();</b>
<b class="nc"><i>65</i>&nbsp;        fxmlLoader.setLocation(getClass().getResource(&quot;/FXML/connectionToServer.fxml&quot;));;</b>
<b class="nc"><i>66</i>&nbsp;        root = fxmlLoader.load();</b>
<b class="nc"><i>67</i>&nbsp;        scene = new Scene(root);</b>
<b class="nc"><i>68</i>&nbsp;        primaryStage.setResizable(false);</b>
<b class="nc"><i>69</i>&nbsp;        primaryStage.setScene(scene);</b>
<b class="nc"><i>70</i>&nbsp;        primaryStage.setTitle(&quot;Santorini&quot;);</b>
<b class="nc"><i>71</i>&nbsp;        primaryStage.show();</b>
<i>72</i>&nbsp;
<b class="nc"><i>73</i>&nbsp;        gameView.updateMoment(CurrentMoment.START);</b>
<i>74</i>&nbsp;
<b class="nc"><i>75</i>&nbsp;        ConnectionToServerController connectionToServerController = fxmlLoader.getController();</b>
<b class="nc"><i>76</i>&nbsp;        connectionToServerController.setGui(this);</b>
<i>77</i>&nbsp;
<b class="nc"><i>78</i>&nbsp;        primaryStage.setOnCloseRequest(new EventHandler&lt;&gt;() {</b>
<i>79</i>&nbsp;            @Override
<i>80</i>&nbsp;            public void handle(WindowEvent windowEvent) {
<b class="nc"><i>81</i>&nbsp;                if(networkHandler!=null)</b>
<b class="nc"><i>82</i>&nbsp;                    networkHandler.endConnection();</b>
<b class="nc"><i>83</i>&nbsp;                System.exit(0);</b>
<i>84</i>&nbsp;            }
<i>85</i>&nbsp;        });
<i>86</i>&nbsp;
<b class="nc"><i>87</i>&nbsp;        primaryStage.centerOnScreen();</b>
<i>88</i>&nbsp;    }
<i>89</i>&nbsp;
<i>90</i>&nbsp;    /**
<i>91</i>&nbsp;     * This method is used to change the layout of the current scene, loading another FXML file.
<i>92</i>&nbsp;     * @param scene the scene that must be changed.
<i>93</i>&nbsp;     * @param path the path of the file that has to be loaded.
<i>94</i>&nbsp;     * @param &lt;T&gt; the controller of the new scene.
<i>95</i>&nbsp;     * @return the controller of the new scene.
<i>96</i>&nbsp;     */
<i>97</i>&nbsp;    private &lt;T&gt; T setLayout(Scene scene, String path) {
<b class="nc"><i>98</i>&nbsp;        FXMLLoader loader = new FXMLLoader();</b>
<b class="nc"><i>99</i>&nbsp;        loader.setLocation(GUI.class.getResource(path));</b>
<i>100</i>&nbsp;
<i>101</i>&nbsp;        Parent root;
<i>102</i>&nbsp;        try {
<b class="nc"><i>103</i>&nbsp;            root = loader.load();</b>
<b class="nc"><i>104</i>&nbsp;            scene.setRoot(root);</b>
<i>105</i>&nbsp;
<i>106</i>&nbsp;
<b class="nc"><i>107</i>&nbsp;        } catch (IOException e) {</b>
<b class="nc"><i>108</i>&nbsp;            e.printStackTrace();</b>
<b class="nc"><i>109</i>&nbsp;        }</b>
<b class="nc"><i>110</i>&nbsp;        return loader.getController();</b>
<i>111</i>&nbsp;    }
<i>112</i>&nbsp;
<i>113</i>&nbsp;    /**
<i>114</i>&nbsp;     * This method loads the scene where username and color are asked and add the
<i>115</i>&nbsp;     * networkHandler as a listener.
<i>116</i>&nbsp;     */
<i>117</i>&nbsp;    @Override
<i>118</i>&nbsp;    public void askFirstConnection() {
<b class="nc"><i>119</i>&nbsp;        Platform.runLater(() -&gt; {</b>
<b class="nc"><i>120</i>&nbsp;            StartController startController = setLayout(scene, &quot;/FXML/startPane.fxml&quot;);</b>
<b class="nc"><i>121</i>&nbsp;            startController.addViewListener(networkHandler);</b>
<i>122</i>&nbsp;        });
<i>123</i>&nbsp;    }
<i>124</i>&nbsp;
<i>125</i>&nbsp;    /**
<i>126</i>&nbsp;     * This method loads the scene where the number of players is asked and add the
<i>127</i>&nbsp;     * networkHandler as a listener.
<i>128</i>&nbsp;     */
<i>129</i>&nbsp;    @Override
<i>130</i>&nbsp;    public void askNumberOfPlayers() {
<b class="nc"><i>131</i>&nbsp;        Platform.runLater(() -&gt; {</b>
<b class="nc"><i>132</i>&nbsp;            ChoosePlayersController choosePlayersController = setLayout(scene,&quot;/FXML/choosePlayers.fxml&quot;);</b>
<b class="nc"><i>133</i>&nbsp;            choosePlayersController.addViewListener(networkHandler);</b>
<i>134</i>&nbsp;        });
<i>135</i>&nbsp;    }
<i>136</i>&nbsp;
<i>137</i>&nbsp;    /**
<i>138</i>&nbsp;     * This method loads the scene where the Challenger is asked to choose the gods and the first player of the game.
<i>139</i>&nbsp;     * @param usernames the list of players in the game.
<i>140</i>&nbsp;     */
<i>141</i>&nbsp;    @Override
<i>142</i>&nbsp;    public void challengerWillChooseThreeGods(ArrayList&lt;String&gt; usernames) {
<b class="nc"><i>143</i>&nbsp;        Platform.runLater(() -&gt; {</b>
<b class="nc"><i>144</i>&nbsp;            primaryStage.setWidth(1100);</b>
<b class="nc"><i>145</i>&nbsp;            primaryStage.setHeight(800);</b>
<b class="nc"><i>146</i>&nbsp;            primaryStage.centerOnScreen();</b>
<i>147</i>&nbsp;
<b class="nc"><i>148</i>&nbsp;            ChallengerController chooseCardsController = setLayout(scene, &quot;/FXML/challenger.fxml&quot;);</b>
<b class="nc"><i>149</i>&nbsp;            chooseCardsController.addViewListener(networkHandler);</b>
<b class="nc"><i>150</i>&nbsp;            chooseCardsController.setNumberOfPlayers(gameView.getNumberOfPlayers());</b>
<b class="nc"><i>151</i>&nbsp;            chooseCardsController.setFirstPlayer(usernames.get(0));</b>
<b class="nc"><i>152</i>&nbsp;            chooseCardsController.setSecondPlayer(usernames.get(1));</b>
<b class="nc"><i>153</i>&nbsp;            if (usernames.size() == 3)</b>
<b class="nc"><i>154</i>&nbsp;                chooseCardsController.setThirdPlayer(usernames.get(2));</b>
<i>155</i>&nbsp;            else
<b class="nc"><i>156</i>&nbsp;                chooseCardsController.setThirdPlayer(null);</b>
<i>157</i>&nbsp;        });
<i>158</i>&nbsp;    }
<i>159</i>&nbsp;
<i>160</i>&nbsp;    /**
<i>161</i>&nbsp;     * This method loads the scene where the player has to choose the god&#39;s power that will use
<i>162</i>&nbsp;     * during the game.
<i>163</i>&nbsp;     * @param godsChosen is the array of the available gods (chosen by the challenger)
<i>164</i>&nbsp;     */
<i>165</i>&nbsp;    @Override
<i>166</i>&nbsp;    public void chooseYourGod(ArrayList&lt;GodName&gt; godsChosen) {
<b class="nc"><i>167</i>&nbsp;        Platform.runLater(() -&gt; {</b>
<i>168</i>&nbsp;
<b class="nc"><i>169</i>&nbsp;            primaryStage.setWidth(1100);</b>
<b class="nc"><i>170</i>&nbsp;            primaryStage.setHeight(800);</b>
<b class="nc"><i>171</i>&nbsp;            primaryStage.centerOnScreen();</b>
<i>172</i>&nbsp;
<b class="nc"><i>173</i>&nbsp;            ChooseCardController chooseCardController = setLayout(scene, &quot;/FXML/chooseCard.fxml&quot;);</b>
<b class="nc"><i>174</i>&nbsp;            chooseCardController.addViewListener(networkHandler);</b>
<b class="nc"><i>175</i>&nbsp;            chooseCardController.setAvailableGods(godsChosen);</b>
<b class="nc"><i>176</i>&nbsp;            chooseCardController.setLessVisible();</b>
<b class="nc"><i>177</i>&nbsp;            chooseCardController.setGameView(gameView);</b>
<i>178</i>&nbsp;        });
<i>179</i>&nbsp;
<i>180</i>&nbsp;    }
<i>181</i>&nbsp;
<i>182</i>&nbsp;    /**
<i>183</i>&nbsp;     * This method loads an Alert pane with an error message.
<i>184</i>&nbsp;     * @param text the content of the error message.
<i>185</i>&nbsp;     */
<i>186</i>&nbsp;    @Override
<i>187</i>&nbsp;    public void showErrorMessage(String text) {
<b class="nc"><i>188</i>&nbsp;        Platform.runLater(() -&gt; {</b>
<b class="nc"><i>189</i>&nbsp;            Alert a = new Alert(Alert.AlertType.WARNING);</b>
<b class="nc"><i>190</i>&nbsp;            a.setContentText(text);</b>
<b class="nc"><i>191</i>&nbsp;            a.show();</b>
<i>192</i>&nbsp;        });
<i>193</i>&nbsp;    }
<i>194</i>&nbsp;
<i>195</i>&nbsp;    /**
<i>196</i>&nbsp;     * This method loads an Alert pane with an information about the game.
<i>197</i>&nbsp;     * @param text the content of the information.
<i>198</i>&nbsp;     */
<i>199</i>&nbsp;    @Override
<i>200</i>&nbsp;    public void showImportantMessage(String text) {
<b class="nc"><i>201</i>&nbsp;        Platform.runLater(() -&gt; {</b>
<b class="nc"><i>202</i>&nbsp;            Alert a = new Alert(Alert.AlertType.INFORMATION);</b>
<b class="nc"><i>203</i>&nbsp;            a.setContentText(text);</b>
<b class="nc"><i>204</i>&nbsp;            a.show();</b>
<i>205</i>&nbsp;        });
<i>206</i>&nbsp;    }
<i>207</i>&nbsp;
<i>208</i>&nbsp;    /**
<i>209</i>&nbsp;     * This method loads the scene where the winner is declared and the game ends.
<i>210</i>&nbsp;     * @param usernameWinner is the username of the winner.
<i>211</i>&nbsp;     */
<i>212</i>&nbsp;    @Override
<i>213</i>&nbsp;    public void theWinnerIs(String usernameWinner) {
<b class="nc"><i>214</i>&nbsp;        Platform.runLater(()-&gt; {</b>
<i>215</i>&nbsp;            try {
<b class="nc"><i>216</i>&nbsp;                Stage winnerStage = new Stage();</b>
<b class="nc"><i>217</i>&nbsp;                winnerStage.setHeight(450);</b>
<b class="nc"><i>218</i>&nbsp;                winnerStage.setWidth(600);</b>
<b class="nc"><i>219</i>&nbsp;                winnerStage.setTitle(&quot;Game over&quot;);</b>
<i>220</i>&nbsp;
<b class="nc"><i>221</i>&nbsp;                FXMLLoader fxmlLoader = new FXMLLoader();</b>
<b class="nc"><i>222</i>&nbsp;                fxmlLoader.setLocation(getClass().getResource(&quot;/FXML/winningAdvice.fxml&quot;));</b>
<b class="nc"><i>223</i>&nbsp;                AnchorPane rootAnchorPane = fxmlLoader.load();</b>
<b class="nc"><i>224</i>&nbsp;                Scene scene = new Scene(rootAnchorPane);</b>
<i>225</i>&nbsp;
<b class="nc"><i>226</i>&nbsp;                String nameWinnerGod = gameView.getGodByUsername(usernameWinner);</b>
<b class="nc"><i>227</i>&nbsp;                ImageView imageView = (ImageView) rootAnchorPane.getChildren().get(5);</b>
<b class="nc"><i>228</i>&nbsp;                imageView.setImage(new Image(&quot;Images/Podium/podium-&quot;+nameWinnerGod+&quot;.png&quot;));</b>
<i>229</i>&nbsp;
<b class="nc"><i>230</i>&nbsp;                Text text = (Text) rootAnchorPane.getChildren().get(6);</b>
<i>231</i>&nbsp;
<b class="nc"><i>232</i>&nbsp;                if (gameView.getMyUsername().equals(usernameWinner)) {</b>
<b class="nc"><i>233</i>&nbsp;                    text.setText(&quot;CONGRATULATIONS!\nYou won!&quot;);</b>
<i>234</i>&nbsp;                }
<i>235</i>&nbsp;                else {
<b class="nc"><i>236</i>&nbsp;                    text.setText(&quot;GAME OVER.\n&quot; +usernameWinner+ &quot; won.&quot;);</b>
<i>237</i>&nbsp;                }
<i>238</i>&nbsp;
<b class="nc"><i>239</i>&nbsp;                winnerStage.setScene(scene);</b>
<b class="nc"><i>240</i>&nbsp;                winnerStage.setResizable(false);</b>
<b class="nc"><i>241</i>&nbsp;                winnerStage.initModality(Modality.APPLICATION_MODAL);</b>
<b class="nc"><i>242</i>&nbsp;                winnerStage.show();</b>
<i>243</i>&nbsp;
<b class="nc"><i>244</i>&nbsp;            } catch (IOException e) {</b>
<b class="nc"><i>245</i>&nbsp;                e.printStackTrace();</b>
<b class="nc"><i>246</i>&nbsp;            }</b>
<i>247</i>&nbsp;        });
<i>248</i>&nbsp;    }
<i>249</i>&nbsp;    
<i>250</i>&nbsp;    /**
<i>251</i>&nbsp;     * This method loads the scene where a loser is declared.
<i>252</i>&nbsp;     */
<i>253</i>&nbsp;    @Override
<i>254</i>&nbsp;    public void theLoserIs(String usernameLoser) {
<b class="nc"><i>255</i>&nbsp;        Platform.runLater(()-&gt; {</b>
<b class="nc"><i>256</i>&nbsp;            Stage loserStage = new Stage();</b>
<b class="nc"><i>257</i>&nbsp;            loserStage.setHeight(450);</b>
<b class="nc"><i>258</i>&nbsp;            loserStage.setWidth(600);</b>
<b class="nc"><i>259</i>&nbsp;            loserStage.centerOnScreen();</b>
<b class="nc"><i>260</i>&nbsp;            loserStage.setTitle(&quot;Game over&quot;);</b>
<i>261</i>&nbsp;
<i>262</i>&nbsp;            try {
<b class="nc"><i>263</i>&nbsp;                FXMLLoader fxmlLoader = new FXMLLoader();</b>
<b class="nc"><i>264</i>&nbsp;                fxmlLoader.setLocation(getClass().getResource(&quot;/FXML/losingAdvice.fxml&quot;));</b>
<b class="nc"><i>265</i>&nbsp;                AnchorPane rootAnchorPane = fxmlLoader.load();</b>
<b class="nc"><i>266</i>&nbsp;                Scene scene = new Scene(rootAnchorPane);</b>
<b class="nc"><i>267</i>&nbsp;                if (gameView.getMyUsername()!=null &amp;&amp; gameView.getMyUsername().equals(usernameLoser)) {</b>
<b class="nc"><i>268</i>&nbsp;                    Text text = (Text) rootAnchorPane.getChildren().get(3);</b>
<b class="nc"><i>269</i>&nbsp;                    text.setText(&quot;GAME OVER!\nYou lost.&quot;);</b>
<b class="nc"><i>270</i>&nbsp;                }else{</b>
<b class="nc"><i>271</i>&nbsp;                    duringGameController.deleteLoserInformation(usernameLoser);</b>
<b class="nc"><i>272</i>&nbsp;                    gameView.getUsernames().remove(usernameLoser);</b>
<b class="nc"><i>273</i>&nbsp;                    Text text = (Text) rootAnchorPane.getChildren().get(3);</b>
<b class="nc"><i>274</i>&nbsp;                    text.setText(usernameLoser+&quot; has just lost but the Game must go on!&quot;);</b>
<i>275</i>&nbsp;                }
<b class="nc"><i>276</i>&nbsp;                loserStage.setScene(scene);</b>
<b class="nc"><i>277</i>&nbsp;                loserStage.setResizable(false);</b>
<i>278</i>&nbsp;
<b class="nc"><i>279</i>&nbsp;                loserStage.initModality(Modality.APPLICATION_MODAL);</b>
<b class="nc"><i>280</i>&nbsp;                loserStage.show();</b>
<b class="nc"><i>281</i>&nbsp;            } catch (IOException e) {</b>
<b class="nc"><i>282</i>&nbsp;                e.printStackTrace();</b>
<b class="nc"><i>283</i>&nbsp;            }</b>
<i>284</i>&nbsp;        });
<i>285</i>&nbsp;    }
<i>286</i>&nbsp;
<i>287</i>&nbsp;    @Override
<i>288</i>&nbsp;    public void showEnd() {
<i>289</i>&nbsp;       // System.exit(0); decide how to handle the final part
<b class="nc"><i>290</i>&nbsp;        Platform.runLater(()-&gt; {</b>
<b class="nc"><i>291</i>&nbsp;            if (gameView.isStart()) {</b>
<b class="nc"><i>292</i>&nbsp;                gameView.updateMoment(CurrentMoment.END);</b>
<b class="nc"><i>293</i>&nbsp;                duringGameController.changeText(&quot;Game over, no action is allowed anymore!&quot;);</b>
<i>294</i>&nbsp;            } else {
<b class="nc"><i>295</i>&nbsp;                Alert alert = new Alert(Alert.AlertType.ERROR);</b>
<b class="nc"><i>296</i>&nbsp;                alert.setTitle(&quot;GAME OVER&quot;);</b>
<b class="nc"><i>297</i>&nbsp;                alert.setHeaderText(&quot;Ops, We are sorry the game cannot continue.&quot;);</b>
<i>298</i>&nbsp;
<b class="nc"><i>299</i>&nbsp;                alert.showAndWait();</b>
<b class="nc"><i>300</i>&nbsp;                System.exit(0);</b>
<i>301</i>&nbsp;
<i>302</i>&nbsp;            }
<i>303</i>&nbsp;        });
<i>304</i>&nbsp;    }
<i>305</i>&nbsp;
<i>306</i>&nbsp;    /**
<i>307</i>&nbsp;     * method implemented in order to display the same board but with the different slot that has just been updated from the model
<i>308</i>&nbsp;     * @param slot is the slot that has been changed
<i>309</i>&nbsp;     */
<i>310</i>&nbsp;    @Override
<i>311</i>&nbsp;    public void showNewBoard(Slot slot) {
<b class="nc"><i>312</i>&nbsp;        Platform.runLater(()-&gt; {</b>
<b class="nc"><i>313</i>&nbsp;            gameView.updateMoment(CurrentMoment.WAIT); //new current scene</b>
<b class="nc"><i>314</i>&nbsp;            duringGameController.changeSlot(slot);</b>
<i>315</i>&nbsp;        });
<i>316</i>&nbsp;    }
<i>317</i>&nbsp;
<i>318</i>&nbsp;    /**
<i>319</i>&nbsp;     * method used to set the main scene, when the scene with the board is set, the default moment is wait
<i>320</i>&nbsp;     * the public information are displayed
<i>321</i>&nbsp;     */
<i>322</i>&nbsp;    @Override
<i>323</i>&nbsp;    public void showGame() {
<b class="nc"><i>324</i>&nbsp;        Platform.runLater(()-&gt; {</b>
<b class="nc"><i>325</i>&nbsp;            primaryStage.setWidth(1100);</b>
<b class="nc"><i>326</i>&nbsp;            primaryStage.setHeight(800);</b>
<b class="nc"><i>327</i>&nbsp;            primaryStage.centerOnScreen();</b>
<i>328</i>&nbsp;
<b class="nc"><i>329</i>&nbsp;            duringGameController = setLayout(scene, &quot;/FXML/boardDuringGame.fxml&quot;);</b>
<b class="nc"><i>330</i>&nbsp;            gameView.updateMoment(CurrentMoment.WAIT); //new current scene</b>
<b class="nc"><i>331</i>&nbsp;            duringGameController.setGameView(gameView);</b>
<b class="nc"><i>332</i>&nbsp;            duringGameController.addViewListener(networkHandler);</b>
<b class="nc"><i>333</i>&nbsp;            duringGameController.changeText();</b>
<b class="nc"><i>334</i>&nbsp;            duringGameController.displayBuildDome();</b>
<b class="nc"><i>335</i>&nbsp;            primaryStage.setResizable(true);</b>
<i>336</i>&nbsp;        });
<i>337</i>&nbsp;    }
<i>338</i>&nbsp;
<i>339</i>&nbsp;
<i>340</i>&nbsp;    /**
<i>341</i>&nbsp;     * method that sets a the moment in which the gui expects the worker to use, in order to allow the main controller to handle the click differently
<i>342</i>&nbsp;     */
<i>343</i>&nbsp;    @Override
<i>344</i>&nbsp;    public void askWhichWorkerToUse() {
<b class="nc"><i>345</i>&nbsp;        Platform.runLater(() -&gt; {</b>
<b class="nc"><i>346</i>&nbsp;            gameView.updateMoment(CurrentMoment.ASK_WHICH_WORKER); //new current scene</b>
<b class="nc"><i>347</i>&nbsp;            duringGameController.resetRowsAndColumns();</b>
<b class="nc"><i>348</i>&nbsp;            duringGameController.changeText();</b>
<i>349</i>&nbsp;        });
<i>350</i>&nbsp;    }
<i>351</i>&nbsp;
<i>352</i>&nbsp;    /**
<i>353</i>&nbsp;     * method that sets method at the moment (current scene) in which the gui expects two positions for the initial workers, in order to allow the main controller to handle the click differently
<i>354</i>&nbsp;     */
<i>355</i>&nbsp;    @Override
<i>356</i>&nbsp;    public void askWhereToPositionWorkers() {
<b class="nc"><i>357</i>&nbsp;        Platform.runLater(() -&gt; {</b>
<b class="nc"><i>358</i>&nbsp;            gameView.updateMoment(CurrentMoment.ASK_INITIAL_POSITION);//new current scene</b>
<b class="nc"><i>359</i>&nbsp;            duringGameController.resetRowsAndColumns();</b>
<b class="nc"><i>360</i>&nbsp;            duringGameController.changeText();</b>
<i>361</i>&nbsp;        });
<i>362</i>&nbsp;    }
<i>363</i>&nbsp;
<i>364</i>&nbsp;    /**
<i>365</i>&nbsp;     * method that if the game hasn&#39;t started informs the user with an alert to wait, otherwise it sets the wait moment in main scene
<i>366</i>&nbsp;     */
<i>367</i>&nbsp;    @Override
<i>368</i>&nbsp;    public void othersTurn(String usernameOnTurn) {
<b class="nc"><i>369</i>&nbsp;        Platform.runLater(() -&gt; {</b>
<b class="nc"><i>370</i>&nbsp;            if(!gameView.isStart()) {</b>
<b class="nc"><i>371</i>&nbsp;                primaryStage.setWidth(600);</b>
<b class="nc"><i>372</i>&nbsp;                primaryStage.setHeight(400);</b>
<b class="nc"><i>373</i>&nbsp;                primaryStage.centerOnScreen();</b>
<b class="nc"><i>374</i>&nbsp;                setLayout(scene, &quot;/FXML/waitingPane.fxml&quot;); //now instead of alert I show waiting Pane made by Moni :)</b>
<i>375</i>&nbsp;            }else {
<b class="nc"><i>376</i>&nbsp;                gameView.updateMoment(CurrentMoment.WAIT);//new current scene</b>
<b class="nc"><i>377</i>&nbsp;                duringGameController.changeText(&quot;WAIT! It&#39;s &quot; + usernameOnTurn + &quot;&#39;s turn.&quot;);</b>
<i>378</i>&nbsp;            }
<i>379</i>&nbsp;        });
<i>380</i>&nbsp;    }
<i>381</i>&nbsp;
<i>382</i>&nbsp;    /**
<i>383</i>&nbsp;     * method that indicates to the DuringGameController with the new moment set that it has to wait for action + slot
<i>384</i>&nbsp;     */
<i>385</i>&nbsp;    @Override
<i>386</i>&nbsp;    public void askAction() {
<b class="nc"><i>387</i>&nbsp;        Platform.runLater(() -&gt; {</b>
<b class="nc"><i>388</i>&nbsp;            gameView.updateMoment(CurrentMoment.CHOOSE_ACTION); //new current scene</b>
<b class="nc"><i>389</i>&nbsp;            duringGameController.changeText();</b>
<i>390</i>&nbsp;        });
<i>391</i>&nbsp;    }
<i>392</i>&nbsp;
<i>393</i>&nbsp;    /**
<i>394</i>&nbsp;     * gives the informations to the duringGameController to set them in the lateral part of the scene
<i>395</i>&nbsp;     */
<i>396</i>&nbsp;    @Override
<i>397</i>&nbsp;    public void showPublicInformation() {
<b class="nc"><i>398</i>&nbsp;        Platform.runLater(() -&gt; {</b>
<b class="nc"><i>399</i>&nbsp;            duringGameController.setPublicInformation();</b>
<i>400</i>&nbsp;        });
<i>401</i>&nbsp;    }
<i>402</i>&nbsp;
<i>403</i>&nbsp;    /**
<i>404</i>&nbsp;     *This method is used to let the user have more details about what the other player is doing while playing
<i>405</i>&nbsp;     * @param changes indicates what has changed
<i>406</i>&nbsp;     */
<i>407</i>&nbsp;    @Override
<i>408</i>&nbsp;    public void whileOnGame(String changes) {
<b class="nc"><i>409</i>&nbsp;        Platform.runLater(() -&gt; {</b>
<b class="nc"><i>410</i>&nbsp;            if(!gameView.isMyTurn())</b>
<b class="nc"><i>411</i>&nbsp;                duringGameController.changeText(changes);</b>
<i>412</i>&nbsp;        });
<i>413</i>&nbsp;    }
<i>414</i>&nbsp;}
</div>
</div>

<div class="footer">
    
    <div style="float:right;">generated on 2020-07-02 18:37</div>
</div>
</body>
</html>
